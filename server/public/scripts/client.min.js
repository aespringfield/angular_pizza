var myApp=angular.module("myApp",["ngRoute"]);myApp.config(["$routeProvider",function(a){a.when("/order",{templateUrl:"views/templates/order.html",controller:"OrderController",controllerAs:"order"}).when("/cart",{templateUrl:"views/templates/cart.html",controller:"CartController",controllerAs:"cart"}).when("/confirmed",{templateUrl:"views/templates/confirmed.html",controller:"ConfirmedController",controllerAs:"confirmed"}).otherwise({redirectTo:"order"})}]),myApp.controller("CartController",["PizzaOvenService",function(a){var b=this;b.pizzaObject=a.pizzaObject,b.createToppingsArray=function(a){console.log(a);var b=[];for(var c in a.toppings)console.log("pizza.toppings",a.toppings),console.log("topping",c),!0===a.toppings[c]&&b.push(c);return console.log(b),b},b.deletePizza=a.deletePizza,b.confirmPizza=a.confirmPizza}]),myApp.controller("ConfirmedController",["PizzaOvenService",function(a){var b=this;b.pizzaObject=a.pizzaObject;var c=a.total;b.totalCost=0,b.setTotal=function(a){var d=c(a);b.totalCost=d},b.toppingsToString=function(a){var b;if(0===a.length)b="plain cheese, you boring son of a gun";else if(1===a.length)b=a[0];else if(2===a.length)b=a[0]+" and "+a[1];else{b="and "+a[a.length-1];for(var c=0;c<a.length-1;c++)b=a[c]+", "+b}return b},b.payNow=function(){alert("Thank you for your misplaced trust in our restaurant,\nbut please don't send us any money.")}}]),myApp.controller("OrderController",["PizzaOvenService",function(a){console.log("inside OrderController");var b=this,c=a.addPizza,d=function(){for(var a in b.toppings)b.toppings[a]=!1;return b.size="",b.toppings},e=function(a){console.log(a);var b=[];for(var c in a.toppings)console.log("pizza.toppings",a.toppings),console.log("topping",c),!0===a.toppings[c]&&b.push(c);return console.log(b),b};b.addAndClear=function(a){console.log(a);var b=e(a);console.log(b);var g={size:a.size,toppings:b,cost:function(a){switch(a.size){case"small":return 6;case"medium":return 7;case"large":return 8}}(a)+f(b)};c(g),d()};var f=function(a){return a.length}}]),myApp.factory("PizzaOvenService",function(){var a={pizzasArray:[],confirmedArray:[]},b=function(b){a.pizzasArray.push(b),console.log(a)},c=function(b){a.pizzasArray.splice(b,1)};return{addPizza:b,pizzaObject:a,deletePizza:c,confirmPizza:function(b){var d=a.pizzasArray[b];a.confirmedArray.push(d),console.log(a.confirmedArray),c(b)},total:function(a){for(var b=0,c=0;c<a.confirmedArray.length;c++)b=a.confirmedArray[c].cost+b,console.log(b);return b}}});